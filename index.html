<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>TheRobots.io â€” Play 200+ Free Browser Games</title>
  <meta name="description" content="Play 200+ free browser games instantly. Action, arcade, puzzle, rhythm and more. No downloads, no installs. Just play.">
  <meta name="robots" content="index, follow">
  <meta property="og:title" content="TheRobots.io â€” 200+ Free Browser Games">
  <meta property="og:description" content="Play 200+ free browser games instantly. No downloads required.">
  <meta property="og:type" content="website">

  <!-- AdSense -->
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4099346100621490" crossorigin="anonymous"></script>

  <!-- Fonts: Orbitron for headings (gaming), Inter for body (clean) -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@700;900&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">

  <style>
    :root {
      --bg:        #07070f;
      --bg2:       #0d0d1a;
      --bg3:       #121224;
      --purple:    #9d4edd;
      --purple-lt: #c77dff;
      --cyan:      #00d4ff;
      --coral:     #ff6b6b;
      --gold:      #ffd60a;
      --border:    rgba(157,78,221,0.18);
      --border-h:  rgba(157,78,221,0.55);
      --text:      #e8e8f0;
      --text-dim:  #888899;
      --radius:    14px;
      --nav-h:     68px;
    }

    *, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }

    html { scroll-behavior: smooth; }

    body {
      font-family: 'Inter', system-ui, sans-serif;
      background: var(--bg);
      color: var(--text);
      min-height: 100vh;
      overflow-x: hidden;
    }

    /* â”€â”€ STARFIELD â”€â”€ */
    #stars-canvas {
      position: fixed;
      inset: 0;
      z-index: 0;
      pointer-events: none;
      opacity: 0.5;
    }

    /* â”€â”€ NAV â”€â”€ */
    nav {
      position: fixed;
      top: 0; left: 0; right: 0;
      height: var(--nav-h);
      z-index: 100;
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0 clamp(1rem, 4vw, 2.5rem);
      background: rgba(7,7,15,0.5);
      backdrop-filter: blur(20px) saturate(160%);
      -webkit-backdrop-filter: blur(20px) saturate(160%);
      border-bottom: 1px solid var(--border);
      transition: background 0.4s;
    }
    nav.scrolled { background: rgba(7,7,15,0.88); }

    .nav-logo {
      display: flex;
      align-items: center;
      gap: 10px;
      text-decoration: none;
    }
    .nav-logo img { width: 36px; height: 36px; object-fit: contain; border-radius: 8px; }
    .nav-logo-text {
      font-family: 'Orbitron', monospace;
      font-weight: 900;
      font-size: 1.1rem;
      color: #fff;
      letter-spacing: 0.03em;
    }
    .nav-logo-text span { color: var(--purple-lt); }

    .nav-badge {
      font-size: 0.7rem;
      font-weight: 600;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      color: var(--cyan);
      border: 1px solid rgba(0,212,255,0.3);
      padding: 3px 10px;
      border-radius: 20px;
      background: rgba(0,212,255,0.08);
    }

    /* â”€â”€ HERO â”€â”€ */
    .hero {
      position: relative;
      z-index: 1;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      text-align: center;
      padding: var(--nav-h) 1.5rem 4rem;
    }

    .hero-eyebrow {
      font-size: 0.75rem;
      font-weight: 600;
      letter-spacing: 0.2em;
      text-transform: uppercase;
      color: var(--cyan);
      margin-bottom: 1.5rem;
      opacity: 0;
      animation: fadeUp 0.7s 0.2s forwards;
    }

    .hero-title {
      font-family: 'Orbitron', monospace;
      font-weight: 900;
      font-size: clamp(2.8rem, 8vw, 6.5rem);
      line-height: 1.05;
      letter-spacing: -0.01em;
      margin-bottom: 1.5rem;
      opacity: 0;
      animation: fadeUp 0.7s 0.35s forwards;
    }
    .hero-title .line1 { display: block; color: #fff; }
    .hero-title .line2 {
      display: block;
      background: linear-gradient(90deg, var(--purple), var(--cyan) 60%, var(--purple-lt));
      background-size: 200% auto;
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      animation: gradMove 4s linear infinite, fadeUp 0.7s 0.35s forwards;
    }

    .hero-sub {
      max-width: 540px;
      font-size: clamp(1rem, 2.5vw, 1.2rem);
      color: var(--text-dim);
      line-height: 1.7;
      margin-bottom: 2.5rem;
      opacity: 0;
      animation: fadeUp 0.7s 0.5s forwards;
    }

    .hero-stats {
      display: flex;
      gap: clamp(1.5rem, 4vw, 3.5rem);
      justify-content: center;
      margin-bottom: 3rem;
      opacity: 0;
      animation: fadeUp 0.7s 0.65s forwards;
    }
    .stat { text-align: center; }
    .stat-num {
      font-family: 'Orbitron', monospace;
      font-size: clamp(1.8rem, 4vw, 2.8rem);
      font-weight: 900;
      color: #fff;
      line-height: 1;
    }
    .stat-num span { color: var(--purple-lt); }
    .stat-label {
      font-size: 0.72rem;
      letter-spacing: 0.15em;
      text-transform: uppercase;
      color: var(--text-dim);
      margin-top: 4px;
    }
    .stat-divider { width: 1px; background: var(--border); align-self: stretch; }

    .hero-cta {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      background: linear-gradient(135deg, var(--purple), #5a189a);
      color: #fff;
      font-size: 1rem;
      font-weight: 600;
      padding: 14px 32px;
      border-radius: 50px;
      text-decoration: none;
      box-shadow: 0 0 30px rgba(157,78,221,0.35), 0 4px 20px rgba(0,0,0,0.4);
      transition: transform 0.25s, box-shadow 0.25s;
      opacity: 0;
      animation: fadeUp 0.7s 0.8s forwards;
    }
    .hero-cta:hover {
      transform: translateY(-3px);
      box-shadow: 0 0 50px rgba(157,78,221,0.5), 0 8px 30px rgba(0,0,0,0.4);
    }
    .hero-cta svg { flex-shrink: 0; }

    .hero-scroll-hint {
      position: absolute;
      bottom: 2rem;
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 6px;
      opacity: 0;
      animation: fadeIn 1s 1.5s forwards;
    }
    .hero-scroll-hint span {
      font-size: 0.65rem;
      letter-spacing: 0.15em;
      text-transform: uppercase;
      color: var(--text-dim);
    }
    .scroll-arrow {
      width: 20px;
      height: 20px;
      border-right: 2px solid var(--text-dim);
      border-bottom: 2px solid var(--text-dim);
      transform: rotate(45deg);
      animation: bounce 1.5s ease-in-out infinite;
    }

    /* â”€â”€ MAIN CONTENT â”€â”€ */
    .content {
      position: relative;
      z-index: 1;
      padding: 0 clamp(1rem, 4vw, 2.5rem) 6rem;
      max-width: 1400px;
      margin: 0 auto;
    }

    /* â”€â”€ SEARCH & FILTER BAR â”€â”€ */
    .controls {
      position: sticky;
      top: var(--nav-h);
      z-index: 90;
      padding: 1rem 0;
      background: rgba(7,7,15,0.85);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      border-bottom: 1px solid var(--border);
      margin-bottom: 2.5rem;
    }

    .controls-inner {
      display: flex;
      flex-wrap: wrap;
      gap: 0.75rem;
      align-items: center;
    }

    .search-wrap {
      position: relative;
      flex: 1;
      min-width: 200px;
    }
    .search-icon {
      position: absolute;
      left: 14px;
      top: 50%;
      transform: translateY(-50%);
      color: var(--text-dim);
      pointer-events: none;
    }
    #search {
      width: 100%;
      background: var(--bg3);
      border: 1px solid var(--border);
      border-radius: 10px;
      padding: 10px 14px 10px 42px;
      color: var(--text);
      font-family: 'Inter', sans-serif;
      font-size: 0.9rem;
      outline: none;
      transition: border-color 0.2s, box-shadow 0.2s;
    }
    #search::placeholder { color: var(--text-dim); }
    #search:focus {
      border-color: var(--purple);
      box-shadow: 0 0 0 3px rgba(157,78,221,0.15);
    }

    .filters {
      display: flex;
      gap: 0.5rem;
      flex-wrap: wrap;
    }
    .filter-btn {
      font-family: 'Inter', sans-serif;
      font-size: 0.78rem;
      font-weight: 500;
      letter-spacing: 0.04em;
      padding: 7px 16px;
      border-radius: 30px;
      border: 1px solid var(--border);
      background: transparent;
      color: var(--text-dim);
      cursor: pointer;
      transition: all 0.2s;
      white-space: nowrap;
    }
    .filter-btn:hover { border-color: var(--border-h); color: var(--text); }
    .filter-btn.active {
      border-color: var(--purple);
      background: rgba(157,78,221,0.15);
      color: var(--purple-lt);
    }

    .results-count {
      margin-left: auto;
      font-size: 0.78rem;
      color: var(--text-dim);
      white-space: nowrap;
    }
    .results-count strong { color: var(--text); }

    /* â”€â”€ GAME GRID â”€â”€ */
    #games-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(230px, 1fr));
      gap: 1.25rem;
    }

    .game-card {
      background: var(--bg2);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      overflow: hidden;
      text-decoration: none;
      color: var(--text);
      display: flex;
      flex-direction: column;
      transition: transform 0.25s cubic-bezier(0.34,1.56,0.64,1),
                  border-color 0.25s, box-shadow 0.25s;
      opacity: 0;
      transform: translateY(24px);
    }
    .game-card.visible {
      opacity: 1;
      transform: translateY(0);
      transition: opacity 0.45s ease, transform 0.45s ease,
                  border-color 0.25s, box-shadow 0.25s;
    }
    .game-card:hover {
      transform: translateY(-6px) scale(1.02);
      border-color: var(--border-h);
    }

    .game-card-thumb {
      height: 130px;
      position: relative;
      overflow: hidden;
      flex-shrink: 0;
    }
    .game-card-thumb::after {
      content: '';
      position: absolute;
      inset: 0;
      background: linear-gradient(to bottom, transparent 55%, rgba(0,0,0,0.55));
      pointer-events: none;
      z-index: 1;
    }
    .game-card-thumb svg { transition: transform 0.4s ease; }
    .game-card:hover .game-card-thumb svg { transform: scale(1.08); }

    .game-card-body {
      padding: 1rem 1rem 1.1rem;
      display: flex;
      flex-direction: column;
      flex: 1;
    }
    .game-card-name {
      font-size: 0.95rem;
      font-weight: 600;
      margin-bottom: 0.4rem;
      color: #fff;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }
    .game-card-desc {
      font-size: 0.78rem;
      color: var(--text-dim);
      line-height: 1.55;
      display: -webkit-box;
      -webkit-line-clamp: 2;
      -webkit-box-orient: vertical;
      overflow: hidden;
      flex: 1;
    }
    .game-card-foot {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-top: 0.75rem;
    }
    .cat-badge {
      font-size: 0.65rem;
      font-weight: 600;
      letter-spacing: 0.1em;
      text-transform: uppercase;
      padding: 3px 10px;
      border-radius: 20px;
    }
    .play-arrow {
      font-size: 0.72rem;
      font-weight: 600;
      letter-spacing: 0.06em;
      color: var(--text-dim);
      display: flex;
      align-items: center;
      gap: 4px;
      transition: color 0.2s, gap 0.2s;
    }
    .game-card:hover .play-arrow { color: var(--purple-lt); gap: 7px; }

    /* Category color palettes */
    .theme-fire   { background: linear-gradient(135deg,#1a0500,#2d0a00); }
    .theme-fire .emoji { color: #ff6b00; }
    .theme-fire .cat-badge { background: rgba(255,69,0,0.15); color: #ff8c42; border: 1px solid rgba(255,69,0,0.3); }
    .theme-fire .game-card-thumb { background: linear-gradient(135deg, #1f0800, #3d1000); }

    .theme-ocean  { background: linear-gradient(135deg,#001a26,#002233); }
    .theme-ocean .emoji { color: #00bcd4; }
    .theme-ocean .cat-badge { background: rgba(0,188,212,0.12); color: #4dd0e1; border: 1px solid rgba(0,188,212,0.3); }
    .theme-ocean .game-card-thumb { background: linear-gradient(135deg, #001520, #002a3d); }

    .theme-space  { background: linear-gradient(135deg,#0d0020,#1a003d); }
    .theme-space .emoji { color: #c77dff; }
    .theme-space .cat-badge { background: rgba(157,78,221,0.15); color: #c77dff; border: 1px solid rgba(157,78,221,0.3); }
    .theme-space .game-card-thumb { background: linear-gradient(135deg, #0a0015, #1a0035); }

    .theme-neon   { background: linear-gradient(135deg,#001a10,#002215); }
    .theme-neon .emoji { color: #00ff88; }
    .theme-neon .cat-badge { background: rgba(0,255,136,0.12); color: #00ff88; border: 1px solid rgba(0,255,136,0.3); }
    .theme-neon .game-card-thumb { background: linear-gradient(135deg, #001208, #001a0d); }

    .theme-forest { background: linear-gradient(135deg,#051205,#091509); }
    .theme-forest .emoji { color: #66bb6a; }
    .theme-forest .cat-badge { background: rgba(76,175,80,0.12); color: #81c784; border: 1px solid rgba(76,175,80,0.3); }
    .theme-forest .game-card-thumb { background: linear-gradient(135deg, #040d04, #081208); }

    .theme-ice    { background: linear-gradient(135deg,#001520,#001d2e); }
    .theme-ice .emoji { color: #80deea; }
    .theme-ice .cat-badge { background: rgba(77,208,225,0.12); color: #80deea; border: 1px solid rgba(77,208,225,0.3); }
    .theme-ice .game-card-thumb { background: linear-gradient(135deg, #001018, #001825); }

    .theme-candy  { background: linear-gradient(135deg,#200010,#2d0015); }
    .theme-candy .emoji { color: #f06292; }
    .theme-candy .cat-badge { background: rgba(240,98,146,0.12); color: #f48fb1; border: 1px solid rgba(240,98,146,0.3); }
    .theme-candy .game-card-thumb { background: linear-gradient(135deg, #180008, #220012); }

    .theme-desert { background: linear-gradient(135deg,#1a1200,#221800); }
    .theme-desert .emoji { color: #ffd54f; }
    .theme-desert .cat-badge { background: rgba(255,213,79,0.12); color: #ffe082; border: 1px solid rgba(255,213,79,0.3); }
    .theme-desert .game-card-thumb { background: linear-gradient(135deg, #120d00, #1a1200); }

    .theme-rhythm { background: linear-gradient(135deg,#150020,#1e0030); }
    .theme-rhythm .emoji { color: #e040fb; }
    .theme-rhythm .cat-badge { background: rgba(224,64,251,0.12); color: #ea80fc; border: 1px solid rgba(224,64,251,0.3); }
    .theme-rhythm .game-card-thumb { background: linear-gradient(135deg, #100018, #180025); }

    .theme-pixel  { background: linear-gradient(135deg,#001520,#002240); }
    .theme-pixel .emoji { color: #00d4ff; }
    .theme-pixel .cat-badge { background: rgba(0,212,255,0.12); color: #4dd9ff; border: 1px solid rgba(0,212,255,0.3); }
    .theme-pixel .game-card-thumb { background: linear-gradient(135deg, #000d14, #001828); }

    .theme-default { background: linear-gradient(135deg,#0f0a1e,#150d28); }
    .theme-default .emoji { color: #c77dff; }
    .theme-default .cat-badge { background: rgba(157,78,221,0.12); color: #c77dff; border: 1px solid rgba(157,78,221,0.3); }
    .theme-default .game-card-thumb { background: linear-gradient(135deg, #0a0618, #100820); }

    /* â”€â”€ EMPTY STATE â”€â”€ */
    #empty-state {
      display: none;
      text-align: center;
      padding: 5rem 1rem;
      color: var(--text-dim);
    }
    #empty-state .es-icon { font-size: 3rem; margin-bottom: 1rem; }
    #empty-state h3 { font-size: 1.2rem; color: var(--text); margin-bottom: 0.5rem; }

    /* â”€â”€ FOOTER â”€â”€ */
    footer {
      position: relative;
      z-index: 1;
      border-top: 1px solid var(--border);
      padding: 2.5rem clamp(1rem, 4vw, 2.5rem);
      text-align: center;
      color: var(--text-dim);
      font-size: 0.82rem;
    }
    footer a { color: var(--purple-lt); text-decoration: none; }
    footer a:hover { text-decoration: underline; }

    /* â”€â”€ ANIMATIONS â”€â”€ */
    @keyframes fadeUp {
      from { opacity: 0; transform: translateY(20px); }
      to   { opacity: 1; transform: translateY(0); }
    }
    @keyframes fadeIn {
      from { opacity: 0; }
      to   { opacity: 1; }
    }
    @keyframes gradMove {
      from { background-position: 0% center; }
      to   { background-position: 200% center; }
    }
    @keyframes bounce {
      0%, 100% { transform: rotate(45deg) translateY(0); }
      50%       { transform: rotate(45deg) translateY(5px); }
    }

    /* â”€â”€ MODAL â”€â”€ */
    #modal-overlay {
      display: none;
      position: fixed;
      inset: 0;
      z-index: 200;
      background: rgba(0,0,0,0.75);
      backdrop-filter: blur(8px);
      -webkit-backdrop-filter: blur(8px);
      align-items: center;
      justify-content: center;
      padding: 1rem;
    }
    #modal-overlay.open { display: flex; }

    #modal {
      background: var(--bg2);
      border: 1px solid var(--border-h);
      border-radius: 20px;
      width: 100%;
      max-width: 680px;
      max-height: 88vh;
      overflow-y: auto;
      position: relative;
      box-shadow: 0 0 60px rgba(157,78,221,0.25), 0 20px 60px rgba(0,0,0,0.6);
      animation: modalIn 0.28s cubic-bezier(0.34,1.56,0.64,1);
    }
    @keyframes modalIn {
      from { opacity:0; transform: scale(0.9) translateY(20px); }
      to   { opacity:1; transform: scale(1) translateY(0); }
    }

    .modal-thumb {
      height: 180px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 5rem;
      border-radius: 20px 20px 0 0;
      position: relative;
      overflow: hidden;
    }
    .modal-thumb::after {
      content: '';
      position: absolute;
      inset: 0;
      background: linear-gradient(to bottom, transparent 50%, var(--bg2));
    }

    .modal-body { padding: 1.5rem 2rem 2rem; }

    .modal-header {
      display: flex;
      align-items: flex-start;
      justify-content: space-between;
      margin-bottom: 1.25rem;
      gap: 1rem;
    }
    .modal-title {
      font-family: 'Orbitron', monospace;
      font-size: clamp(1.3rem, 3vw, 1.8rem);
      font-weight: 900;
      color: #fff;
      line-height: 1.2;
    }
    .modal-close {
      background: rgba(255,255,255,0.06);
      border: 1px solid var(--border);
      color: var(--text-dim);
      width: 36px;
      height: 36px;
      border-radius: 50%;
      cursor: pointer;
      font-size: 1.1rem;
      display: flex;
      align-items: center;
      justify-content: center;
      flex-shrink: 0;
      transition: all 0.2s;
    }
    .modal-close:hover { background: rgba(255,255,255,0.12); color: #fff; }

    .modal-section { margin-bottom: 1.5rem; }
    .modal-section-title {
      font-size: 0.7rem;
      font-weight: 700;
      letter-spacing: 0.18em;
      text-transform: uppercase;
      color: var(--purple-lt);
      margin-bottom: 0.65rem;
      padding-bottom: 0.4rem;
      border-bottom: 1px solid var(--border);
    }
    .modal-desc {
      font-size: 0.92rem;
      color: var(--text-dim);
      line-height: 1.75;
    }
    .modal-steps {
      list-style: none;
      display: flex;
      flex-direction: column;
      gap: 0.55rem;
    }
    .modal-steps li {
      display: flex;
      gap: 0.75rem;
      font-size: 0.88rem;
      color: var(--text-dim);
      line-height: 1.55;
    }
    .modal-steps li .step-num {
      flex-shrink: 0;
      width: 22px;
      height: 22px;
      border-radius: 50%;
      background: rgba(157,78,221,0.2);
      border: 1px solid rgba(157,78,221,0.4);
      color: var(--purple-lt);
      font-size: 0.7rem;
      font-weight: 700;
      display: flex;
      align-items: center;
      justify-content: center;
      margin-top: 1px;
    }

    .modal-controls {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
    }
    .ctrl-chip {
      background: var(--bg3);
      border: 1px solid var(--border);
      border-radius: 8px;
      padding: 6px 12px;
      font-size: 0.8rem;
      color: var(--text);
      display: flex;
      align-items: center;
      gap: 6px;
    }
    .ctrl-key {
      background: rgba(255,255,255,0.08);
      border: 1px solid rgba(255,255,255,0.15);
      border-radius: 4px;
      padding: 1px 6px;
      font-size: 0.72rem;
      font-family: monospace;
      color: #fff;
    }

    .modal-features {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 0.5rem;
    }
    .modal-feature {
      display: flex;
      align-items: flex-start;
      gap: 0.5rem;
      font-size: 0.83rem;
      color: var(--text-dim);
      line-height: 1.45;
    }
    .modal-feature::before {
      content: 'âœ¦';
      color: var(--purple);
      font-size: 0.65rem;
      margin-top: 3px;
      flex-shrink: 0;
    }

    .modal-tips {
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
    }
    .modal-tip {
      display: flex;
      align-items: flex-start;
      gap: 0.6rem;
      font-size: 0.85rem;
      color: var(--text-dim);
      line-height: 1.55;
    }
    .tip-icon { flex-shrink: 0; font-size: 0.9rem; }

    .modal-play {
      display: flex;
      gap: 0.75rem;
      margin-top: 1.75rem;
      flex-wrap: wrap;
    }
    .btn-play {
      flex: 1;
      min-width: 160px;
      background: linear-gradient(135deg, var(--purple), #5a189a);
      color: #fff;
      font-family: 'Inter', sans-serif;
      font-size: 1rem;
      font-weight: 700;
      padding: 14px 24px;
      border: none;
      border-radius: 50px;
      cursor: pointer;
      text-decoration: none;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      box-shadow: 0 0 30px rgba(157,78,221,0.35);
      transition: transform 0.2s, box-shadow 0.2s;
    }
    .btn-play:hover { transform: translateY(-2px); box-shadow: 0 0 45px rgba(157,78,221,0.5); }
    .btn-secondary {
      background: transparent;
      border: 1px solid var(--border-h);
      color: var(--text-dim);
      font-family: 'Inter', sans-serif;
      font-size: 0.9rem;
      font-weight: 500;
      padding: 14px 20px;
      border-radius: 50px;
      cursor: pointer;
      transition: all 0.2s;
    }
    .btn-secondary:hover { background: rgba(255,255,255,0.05); color: var(--text); }

    /* â”€â”€ RESPONSIVE â”€â”€ */
    @media (max-width: 600px) {
      .hero-stats { gap: 1.2rem; }
      .stat-divider { display: none; }
      #games-grid { grid-template-columns: repeat(2, 1fr); gap: 0.85rem; }
      .game-card-thumb { height: 100px; }
      .game-card-thumb .emoji { font-size: 2.5rem; }
      .controls-inner { flex-direction: column; align-items: stretch; }
      .filters { gap: 0.4rem; }
      .results-count { margin-left: 0; }
    }

    @media (min-width: 1200px) {
      #games-grid { grid-template-columns: repeat(auto-fill, minmax(210px, 1fr)); }
    }
  </style>
</head>
<body>

  <canvas id="stars-canvas"></canvas>

  <!-- NAV -->
  <nav id="navbar">
    <a href="/" class="nav-logo">
      <img src="images/bot-logo.png" alt="TheRobots.io">
      <span class="nav-logo-text">The<span>Robots</span>.io</span>
    </a>
    <span class="nav-badge">200+ Free Games</span>
  </nav>

  <!-- HERO -->
  <section class="hero">
    <p class="hero-eyebrow">&#9679; Browser Games â€” No Download Required</p>
    <h1 class="hero-title">
      <span class="line1">Play Instantly.</span>
      <span class="line2">No Install Needed.</span>
    </h1>
    <p class="hero-sub">Over 200 free games â€” action, arcade, puzzle, rhythm and more. Open a game and start playing in seconds.</p>

    <div class="hero-stats">
      <div class="stat">
        <div class="stat-num" id="stat-games">0<span>+</span></div>
        <div class="stat-label">Games</div>
      </div>
      <div class="stat-divider"></div>
      <div class="stat">
        <div class="stat-num">5<span>+</span></div>
        <div class="stat-label">Categories</div>
      </div>
      <div class="stat-divider"></div>
      <div class="stat">
        <div class="stat-num">0<span>MB</span></div>
        <div class="stat-label">Download</div>
      </div>
    </div>

    <a href="#games" class="hero-cta">
      <svg width="16" height="16" fill="none" stroke="currentColor" stroke-width="2.5" viewBox="0 0 24 24"><polygon points="5 3 19 12 5 21 5 3"/></svg>
      Browse All Games
    </a>

    <div class="hero-scroll-hint">
      <span>Scroll</span>
      <div class="scroll-arrow"></div>
    </div>
  </section>

  <!-- GAMES SECTION -->
  <section id="games" class="content">
    <div class="controls">
      <div class="controls-inner">
        <div class="search-wrap">
          <svg class="search-icon" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
            <circle cx="11" cy="11" r="8"/><path d="m21 21-4.35-4.35"/>
          </svg>
          <input id="search" type="search" placeholder="Search gamesâ€¦" autocomplete="off" spellcheck="false">
        </div>
        <div class="filters">
          <button class="filter-btn active" data-cat="all">All</button>
          <button class="filter-btn" data-cat="action">Action</button>
          <button class="filter-btn" data-cat="arcade">Arcade</button>
          <button class="filter-btn" data-cat="puzzle">Puzzle</button>
          <button class="filter-btn" data-cat="rhythm">Rhythm</button>
        </div>
        <div class="results-count"><strong id="count">217</strong> games</div>
      </div>
    </div>

    <div id="games-grid"></div>
    <div id="empty-state">
      <div class="es-icon">ðŸŽ®</div>
      <h3>No games found</h3>
      <p>Try a different search term or category.</p>
    </div>
  </section>

  <!-- MODAL -->
  <div id="modal-overlay" role="dialog" aria-modal="true" aria-labelledby="modal-title-text">
    <div id="modal">
      <div class="modal-thumb" id="modal-thumb"></div>
      <div class="modal-body">
        <div class="modal-header">
          <h2 class="modal-title" id="modal-title-text"></h2>
          <button class="modal-close" onclick="closeModal()" aria-label="Close">âœ•</button>
        </div>

        <div class="modal-section">
          <div class="modal-section-title">About this game</div>
          <p class="modal-desc" id="modal-desc"></p>
        </div>

        <div class="modal-section">
          <div class="modal-section-title">How to Play</div>
          <ol class="modal-steps" id="modal-steps"></ol>
        </div>

        <div class="modal-section">
          <div class="modal-section-title">Controls</div>
          <div class="modal-controls" id="modal-controls"></div>
        </div>

        <div class="modal-section">
          <div class="modal-section-title">Game Features</div>
          <div class="modal-features" id="modal-features"></div>
        </div>

        <div class="modal-section">
          <div class="modal-section-title">Tips & Tricks</div>
          <div class="modal-tips" id="modal-tips"></div>
        </div>

        <div class="modal-play">
          <a class="btn-play" id="modal-play-btn" href="#" target="_blank">
            <svg width="16" height="16" fill="currentColor" viewBox="0 0 24 24"><polygon points="5 3 19 12 5 21 5 3"/></svg>
            Play Now â€” Free
          </a>
          <button class="btn-secondary" onclick="closeModal()">Back to Games</button>
        </div>
      </div>
    </div>
  </div>

  <footer>
    <p>&copy; 2025 TheRobots.io &nbsp;Â·&nbsp; <a href="/auth/login.html">Sign In</a> &nbsp;Â·&nbsp; All games free to play in your browser.</p>
  </footer>

  <script>
    // â”€â”€ STARFIELD CANVAS â”€â”€
    (function() {
      const c = document.getElementById('stars-canvas');
      const ctx = c.getContext('2d');
      let stars = [];

      function resize() {
        c.width = window.innerWidth;
        c.height = window.innerHeight;
      }
      function init() {
        stars = [];
        for (let i = 0; i < 180; i++) {
          stars.push({
            x: Math.random() * c.width,
            y: Math.random() * c.height,
            r: Math.random() * 1.2 + 0.2,
            o: Math.random() * 0.8 + 0.1,
            s: Math.random() * 0.4 + 0.05
          });
        }
      }
      function draw() {
        ctx.clearRect(0, 0, c.width, c.height);
        stars.forEach(s => {
          s.o += s.s * 0.02;
          if (s.o > 1 || s.o < 0.05) s.s *= -1;
          ctx.beginPath();
          ctx.arc(s.x, s.y, s.r, 0, Math.PI * 2);
          ctx.fillStyle = `rgba(200,180,255,${s.o})`;
          ctx.fill();
        });
        requestAnimationFrame(draw);
      }
      resize();
      init();
      draw();
      window.addEventListener('resize', () => { resize(); init(); });
    })();

    // â”€â”€ NAVBAR SCROLL â”€â”€
    window.addEventListener('scroll', () => {
      document.getElementById('navbar').classList.toggle('scrolled', window.scrollY > 20);
    });

    // â”€â”€ STAT COUNTER â”€â”€
    (function() {
      const el = document.getElementById('stat-games');
      let cur = 0;
      const target = 217;
      const step = Math.ceil(target / 40);
      const timer = setInterval(() => {
        cur = Math.min(cur + step, target);
        el.innerHTML = cur + '<span>+</span>';
        if (cur >= target) clearInterval(timer);
      }, 30);
    })();

    // â”€â”€ GAME DATA â”€â”€
    // [slug, name, description, category, theme]
    const GAMES = [
      ["stack-tower-game","Stack Tower","Stack blocks as high as you can. Time your taps to align each block and build the tallest tower.","arcade","default"],
      ["zigzag-dash","Zigzag Dash","Navigate through zigzag paths at high speed. Quick reflexes are key to survival.","action","neon"],
      ["aqua-shrink","Aqua Shrink","Dodge rising walls in shrinking aquatic pools. Survive the squeeze.","action","ocean"],
      ["ash-flight","Ash Flight","Soar through volcanic ash clouds, dodging falling debris at increasing speeds.","action","fire"],
      ["ash-hopper","Ash Hopper","Hop across glowing ash platforms as they crumble beneath your feet.","arcade","fire"],
      ["ash-pile","Ash Pile","Stack falling ash blocks into a steady tower before the volcano erupts.","arcade","fire"],
      ["astro-glide","Astro Glide","Glide through asteroid fields, collecting stardust while avoiding collisions.","action","space"],
      ["astro-split","Astro Split","Split your spaceship to dodge dual obstacle streams in deep space.","arcade","space"],
      ["bark-rush","Bark Rush","Rush through a forest, leaping over bark obstacles and fallen logs at high speed.","action","forest"],
      ["beam-shift","Beam Shift","Shift between laser beams in a neon grid. One wrong move ends it all.","action","neon"],
      ["beam-sprint","Beam Sprint","Sprint along shifting energy beams, jumping gaps before they disappear.","action","neon"],
      ["beat-breaker","Beat Breaker","Break rhythmic blocks to the beat. Match the tempo to score big.","rhythm","rhythm"],
      ["beat-chase","Beat Chase","Chase the beat â€” tap in rhythm as the tempo accelerates and patterns multiply.","rhythm","rhythm"],
      ["block-bouncer","Block Bouncer","Bounce blocks off platforms in a chain reaction. Clear the board to win.","arcade","default"],
      ["block-racer","Block Racer","Race colored blocks down a track, switching lanes to avoid crashes.","action","neon"],
      ["branch-sprint","Branch Sprint","Sprint across tree branches at treetop speed, leaping gaps and swinging on vines.","action","forest"],
      ["bubble-break","Bubble Break","Pop bubbles in the right order before they float away. Speed counts.","arcade","ocean"],
      ["bubble-glide","Bubble Glide","Glide through a stream of bubbles, collecting the right colors while avoiding others.","action","ocean"],
      ["bubble-merge","Bubble Merge","Merge matching bubbles to score points as the board fills up. Think fast.","puzzle","ocean"],
      ["cactus-clash","Cactus Clash","Clash against flying cacti in the desert sun. Dodge, weave, and survive.","action","desert"],
      ["cactus-glide","Cactus Glide","Glide over a cactus field with shrinking hover-power. Land softly or burst.","action","desert"],
      ["candy-shrink","Candy Shrink","A candy world is shrinking! Jump platforms before they melt away.","arcade","candy"],
      ["candy-split","Candy Split","Split candy streams to match colors as they pour faster and faster.","puzzle","candy"],
      ["canopy-rush","Canopy Rush","Leap between towering trees and catch random powerups for extra jumps.","action","forest"],
      ["circle-drift","Circle Drift","Drift a circle along a winding path, never touching the walls.","action","default"],
      ["circuit-coil","Circuit Coil","Coil through electric circuits, completing loops before the power cuts out.","puzzle","neon"],
      ["cloud-match","Cloud Match","Match cloud shapes as they drift by. Faster rounds, harder matches.","puzzle","default"],
      ["cloud-shift","Cloud Shift","Shift between cloud platforms as they move and vanish in the sky.","action","default"],
      ["cog-climb","Cog Climb","Climb a tower of turning cogs without getting crushed by the gears.","arcade","default"],
      ["color-dash","Color Dash","Run through color gates matching your current color. Tap to switch. Speed increases every 10 points.","action","neon"],
      ["color-grove","Color Grove","Navigate a colorful grove, painting your path and matching hues.","puzzle","forest"],
      ["coral-droplet","Coral Droplet","Drop through coral reefs, collecting ocean gems while avoiding sea creatures.","action","ocean"],
      ["cosmic-chain","Cosmic Chain","Swipe to link planets in a chain as obstacles spawn and multiply rapidly.","puzzle","space"],
      ["cosmo-sprint","Cosmo Sprint","Sprint through a cosmos of floating rocks and stars at light speed.","action","space"],
      ["crater-twist","Crater Twist","Twist through crater mazes on an alien planet, avoiding lava pits.","action","fire"],
      ["cube-catch","Cube Catch","Catch falling cubes on a rotating platform. Miss one and it's over.","arcade","default"],
      ["cube-drift","Cube Drift","Drift a cube along narrow floating paths over a vast void. Don't fall.","action","default"],
      ["current-spin","Current Spin","Spin with ocean currents, riding waves and avoiding underwater hazards.","action","ocean"],
      ["dot-drift","Dot Drift","Drift a dot through a maze of moving obstacles without touching the walls.","action","neon"],
      ["dot-sprint","Dot Sprint","Sprint a glowing dot along a path that shifts and narrows without warning.","action","neon"],
      ["dual-drift","Dual Drift","Control two objects simultaneously drifting through mirrored obstacle courses.","action","default"],
      ["dune-climber","Dune Climber","Climb shifting sand dunes that crumble under your weight. Reach the top.","action","desert"],
      ["dune-spinner","Dune Spinner","Spin across desert dunes, building momentum to fly over massive gaps.","action","desert"],
      ["dusk-dart","Dusk Dart","Dart through a twilight sky, dodging birds and clouds at sunset speed.","action","default"],
      ["dusk-dash","Dusk Dash","Dash through the fading light as obstacles multiply with the setting sun.","action","default"],
      ["dusk-defense","Dusk Defense","Defend your base at dusk as waves of enemies close in from all sides.","action","default"],
      ["dusk-drift","Dusk Drift","Drift through a moody dusk landscape, collecting fireflies before dark falls.","action","default"],
      ["dusk-pulse","Dusk Pulse","Pulse through dusk energy waves, syncing your rhythm to the fading light.","rhythm","rhythm"],
      ["echo-drift","Echo Drift","Drift through echoing caverns where walls appear and disappear with sound.","action","rhythm"],
      ["echo-flap","Echo Flap","Flap upward through an echo chamber, riding sound waves to stay aloft.","arcade","rhythm"],
      ["echo-spin","Echo Spin","Spin through concentric sound rings, hitting the right notes to advance.","rhythm","rhythm"],
      ["flip-fathom","Flip Fathom","Flip gravity and plunge through deep ocean layers, avoiding sea life.","action","ocean"],
      ["flip-vines","Flip Vines","Flip between vine paths in the jungle, matching the color of each vine.","action","forest"],
      ["frostfall-stack","Frostfall Stack","Stack icy blocks as they fall faster in a snowstorm. Keep the tower balanced.","arcade","ice"],
      ["frost-flap","Frost Flap","Flap through a frozen tundra, riding icy gusts to stay airborne.","arcade","ice"],
      ["frost-flip","Frost Flip","Flip gravity in a frost world â€” the floor becomes the ceiling in an instant.","action","ice"],
      ["frost-split","Frost Split","Split icy beams to clear a path through a glacier cave system.","puzzle","ice"],
      ["galaxy-fuse","Galaxy Fuse","Fuse stars together to create supernovas. Chain reactions score massive points.","puzzle","space"],
      ["gear-glide","Gear Glide","Glide across spinning gear platforms, timing your jumps perfectly.","action","default"],
      ["gear-pong","Gear Pong","Bounce a ball between clockwork gears in a steampunk twist on classic pong.","arcade","default"],
      ["gear-rhythm","Gear Rhythm","Tap matching gears on a rotating clockwork wheel as speed escalates.","rhythm","rhythm"],
      ["geo-flux","Geo Flux","Navigate geometric shapes through a shifting flux field that warps reality.","action","default"],
      ["glacier-escape","Glacier Escape","Escape a collapsing glacier â€” jump between ice blocks before they sink.","action","ice"],
      ["glacier-glide","Glacier Glide","Glide across a glacier surface, gaining speed on downhill runs.","action","ice"],
      ["glide-catch","Glide Catch","Glide through the air, catching falling objects on a shrinking landing zone.","arcade","default"],
      ["glitch-beam","Glitch Beam","Navigate glitching laser beams in a corrupted digital world. Timing is all.","action","neon"],
      ["glitch-sprint","Glitch Sprint","Sprint through a glitching world where the ground disappears without warning.","action","neon"],
      ["glow-beam","Glow Beam","Ride a glowing beam of light, collecting energy orbs before the beam fades.","action","neon"],
      ["glow-divide","Glow Divide","Divide glowing particles into matching groups before the screen overflows.","puzzle","neon"],
      ["glow-drift","Glow Drift","Drift a glowing orb through dark passages, lighting the way forward.","action","neon"],
      ["glow-drop","Glow Drop","Drop glowing balls into the right slots in this fast-paced puzzle game.","puzzle","neon"],
      ["glow-escape","Glow Escape","Escape a glowing maze that reconfigures every time you approach the exit.","action","neon"],
      ["glow-glide","Glow Glide","Glide on streams of neon light, avoiding obstacles in a luminous world.","action","neon"],
      ["gravity-canopy","Gravity Canopy","Navigate a forest canopy where gravity shifts randomly. Hold on tight.","action","forest"],
      ["gravity-chain","Gravity Chain","Chain gravity-affected objects to create platforms and pathways.","puzzle","default"],
      ["gravity-flip","Gravity Flip","Tap to flip gravity up/down while dodging obstacles from both sides. Collect stars for bonus points.","action","space"],
      ["gravity-loop","Gravity Loop","Loop through gravity wells, using their pull to slingshot past obstacles.","action","space"],
      ["gravity-veil","Gravity Veil","Pierce through gravitational veils in space, collecting energy behind each barrier.","action","space"],
      ["gum-pop","Gum Pop","Pop gum bubbles in the correct sequence before they stick to the screen.","arcade","candy"],
      ["hexa-twist","Hexa Twist","Twist hexagonal grids to align colors in this fast-paced spatial puzzle.","puzzle","default"],
      ["hue-walk","Hue Walk","Walk a path that shifts hue â€” match your color to pass each segment.","puzzle","neon"],
      ["icebound-rush","Icebound Rush","Rush across a frozen tundra while ice platforms crack beneath you.","action","ice"],
      ["jelly-jam","Jelly Jam","Jam jelly blocks together to match flavors before the jar overflows.","puzzle","candy"],
      ["jungle-burst","Jungle Burst","Burst through jungle walls at high speed, smashing obstacles in your path.","action","forest"],
      ["jungle-juggle","Jungle Juggle","Juggle fruit in the jungle canopy, keeping multiple balls in the air.","arcade","forest"],
      ["jungle-link","Jungle Link","Link jungle creatures in a chain to create combos for massive points.","puzzle","forest"],
      ["jungle-orbit","Jungle Orbit","Orbit around jungle trees, swinging to each one before your energy runs out.","action","forest"],
      ["jungle-sprint","Jungle Sprint","Sprint through a dense jungle, leaping obstacles and sliding under vines.","action","forest"],
      ["lava-bloom","Lava Bloom","Bloom through lava fields, collecting rare fire flowers before they wilt.","action","fire"],
      ["lava-catch","Lava Catch","Catch glowing lava drops in a bucket that shrinks with each miss.","arcade","fire"],
      ["lava-leap","Lava Leap","Leap between erupting lava rocks as the floor melts away beneath you.","action","fire"],
      ["lava-rush","Lava Rush","Rush through a volcanic corridor as lava walls close in from both sides.","action","fire"],
      ["lava-splitter","Lava Splitter","Split streams of lava to protect your base from the volcanic flood.","action","fire"],
      ["lava-sprint","Lava Sprint","Dodge multiplying volcanic rocks in an endless blazing lava run.","action","fire"],
      ["leaf-pyramid","Leaf Pyramid","Build a pyramid of falling leaves, stacking them before the wind blows them away.","arcade","forest"],
      ["lollipop-flip","Lollipop Flip","Flip lollipops to match their flavors in a sugary, fast-paced matching game.","arcade","candy"],
      ["lollipop-leap","Lollipop Leap","Leap between giant lollipops as they spin and melt. Collect candy along the way.","action","candy"],
      ["lollipop-loop","Lollipop Loop","Loop the lollipop through spiral candy tracks without touching the edges.","action","candy"],
      ["magma-beat","Magma Beat","Beat rhythms on magma drums as the lava rises. Stay on tempo to survive.","rhythm","fire"],
      ["magma-drift","Magma Drift","Drift a magma ball through underground tunnels without touching the walls.","action","fire"],
      ["magma-link","Magma Link","Link magma nodes together to channel heat and power through volcanic vents.","puzzle","fire"],
      ["magma-pulse","Magma Pulse","Pulse energy through magma channels in sync with seismic waves.","rhythm","fire"],
      ["magma-shift","Magma Shift","Shift between magma streams in a volcanic chamber. One wrong move is fatal.","action","fire"],
      ["magnet-glow","Magnet Glow","Use magnetic forces to attract glowing orbs while repelling obstacles.","puzzle","neon"],
      ["magnetic-cumulus","Magnetic Cumulus","Navigate storm clouds magnetically, attracting lightning bolts and raindrops.","action","default"],
      ["magnet-maze","Magnet Maze","Navigate a maze using magnetic attraction and repulsion to guide your path.","puzzle","default"],
      ["magnet-melt","Magnet Melt","Melt metallic barriers using focused magnetic heat beams to clear the path.","puzzle","default"],
      ["mini-drop","Mini Drop","Drop miniature objects into targets that shrink with every successful hit.","arcade","default"],
      ["molten-spin","Molten Spin","Spin through molten rock chambers, staying on the platform as it shrinks.","action","fire"],
      ["molten-tower","Molten Tower","Build a tower with molten blocks before they solidify. Stack them fast.","arcade","fire"],
      ["moss-merge","Moss Merge","Merge moss patches together to cover the ground before it dries out.","puzzle","forest"],
      ["mushroom-pulse","Mushroom Pulse","Pulse between mushrooms in sync with forest rhythms. Miss a beat and fall.","rhythm","forest"],
      ["narrow-trace","Narrow Trace","Trace a path through increasingly narrow corridors without touching the walls.","action","default"],
      ["nebula-swipe","Nebula Swipe","Swipe through nebula clouds to collect star matter before the void expands.","action","space"],
      ["neon-bounce","Neon Bounce","Bounce a glowing ball between neon platforms. Platforms get narrower as your score increases.","arcade","neon"],
      ["neon-coil","Neon Coil","Coil a neon wire through electrified obstacles without shorting the circuit.","puzzle","neon"],
      ["nimbus-path","Nimbus Path","Follow the nimbus cloud path through storm systems, collecting rain as you go.","action","default"],
      ["oasis-combo","Oasis Combo","Combo-chain water droplets in the desert to keep your oasis alive.","puzzle","desert"],
      ["oasis-hop","Oasis Hop","Hop between oasis pools in the desert as they shrink under the blazing sun.","action","desert"],
      ["orbit-drift","Orbit Drift","Drift in orbit around a planet, avoiding space debris and satellites.","action","space"],
      ["orbit-fade","Orbit Fade","Fade between orbital paths before your signal disappears into deep space.","action","space"],
      ["orbit-flip","Orbit Flip","Flip your orbiting craft to switch between two parallel orbital rings.","action","space"],
      ["orbit-leap","Orbit Leap","Leap between planetary orbits, using gravitational assists to travel further.","action","space"],
      ["orbit-roots","Orbit Roots","Root your orbit in planetary gravity wells, swinging between celestial bodies.","puzzle","space"],
      ["orbit-shift","Orbit Shift","Shift orbital paths to avoid collisions as space traffic intensifies.","action","space"],
      ["orbit-spiral","Orbit Spiral","Spiral inward through planetary rings, collecting fuel before hitting the core.","action","space"],
      ["orbit-stack","Orbit Stack","Stack orbiting satellites in perfect formation before the window closes.","arcade","space"],
      ["pipe-align","Pipe Align","Align pipe segments to create a flow path before the pressure blows.","puzzle","default"],
      ["pixel-coil","Pixel Coil","Coil pixel segments into a growing snake without colliding with yourself.","arcade","pixel"],
      ["pixel-drift","Pixel Drift","Drift pixel blocks through a digital maze in retro 8-bit style.","action","pixel"],
      ["pixel-plunge","Pixel Plunge","Plunge through pixel layers in a retro platformer with old-school charm.","action","pixel"],
      ["pixel-pulse","Pixel Pulse","Pulse through a pixelated world, matching frequencies to open each gate.","rhythm","pixel"],
      ["pixel-soar","Pixel Soar","Soar through 8-bit skies, dodging retro obstacles at increasing speed.","action","pixel"],
      ["pixel-surge","Pixel Surge","Surge through a pixel storm, collecting power-ups while avoiding corruption.","action","pixel"],
      ["polar-bounce","Polar Bounce","Bounce across polar ice caps, avoiding cracks and obstacles.","arcade","ice"],
      ["polar-glide","Polar Glide","Glide across frozen polar surfaces, gaining speed on ice and losing it on snow.","action","ice"],
      ["prism-drift","Prism Drift","Drift through a prism of light, splitting colors to unlock hidden paths.","action","neon"],
      ["prism-rise","Prism Rise","Rise through a prism tower, collecting each color of the rainbow in order.","action","neon"],
      ["pulse-bound","Pulse Bound","Bound to the pulse â€” jump only when the beat hits to clear obstacles.","rhythm","rhythm"],
      ["pulse-chase","Pulse Chase","Chase the pulse through neon corridors as it accelerates and splits.","rhythm","rhythm"],
      ["pulse-collector","Pulse Collector","Collect energy pulses before they dissipate in this fast-paced arcade game.","arcade","rhythm"],
      ["pulse-flicker","Pulse Flicker","Flicker between pulse frequencies to stay visible in an unstable dimension.","rhythm","rhythm"],
      ["pulse-glide","Pulse Glide","Glide on energy pulses, riding waves of sound through electric skies.","action","rhythm"],
      ["pulse-grove","Pulse Grove","Navigate a bio-electric grove that pulses with energy. Stay in sync.","rhythm","forest"],
      ["pulse-orbit","Pulse Orbit","Orbit in sync with a pulsing star, collecting energy without getting burned.","rhythm","space"],
      ["pulse-path","Pulse Path","Follow the pulsing path through a maze that changes with every heartbeat.","rhythm","rhythm"],
      ["pulse-slide","Pulse Slide","Slide along energy pulse waves, timing your moves to the rhythm.","rhythm","rhythm"],
      ["pulse-split","Pulse Split","Split energy pulses into channels to power different systems simultaneously.","puzzle","rhythm"],
      ["pulse-swing","Pulse Swing","Swing to the pulse â€” time your arc to the beat for maximum distance.","rhythm","rhythm"],
      ["pulse-trace","Pulse Trace","Trace pulse patterns in the correct sequence before the signal fades.","rhythm","rhythm"],
      ["reef-rush","Reef Rush","Rush through a coral reef, dodging sea creatures and collecting ocean gems.","action","ocean"],
      ["retro-rebound","Retro Rebound","Rebound a ball in retro style, breaking blocks in a classic arcade revival.","arcade","pixel"],
      ["root-roll","Root Roll","Roll through root systems underground, collecting nutrients before they dry up.","action","forest"],
      ["root-rush","Root Rush","Rush through tangled root mazes, finding the exit before time runs out.","action","forest"],
      ["sand-surge","Sand Surge","Surge through desert sandstorms, using the wind to propel yourself forward.","action","desert"],
      ["sandsync-spin","Sandsync Spin","Spin in sync with sand vortexes, matching their rotation to pass through safely.","rhythm","desert"],
      ["shape-rally","Shape Rally","Rally shapes together, matching pairs before the screen overflows.","puzzle","default"],
      ["shape-surge","Shape Surge","Surge through a field of geometric shapes, collecting matching ones for combos.","action","default"],
      ["shrinking-vines","Shrinking Vines","Swing on vines that shrink over time. Reach the next one before they vanish.","action","forest"],
      ["shrink-link","Shrink Link","Link shrinking objects together before they disappear from the screen.","puzzle","default"],
      ["slide-flux","Slide Flux","Slide through flux zones where physics change unpredictably.","action","neon"],
      ["spin-warp","Spin Warp","Warp through spinning portals, timing your entry to avoid the barriers.","action","space"],
      ["splash-dash","Splash Dash","Dash across water surfaces, collecting splashes before you sink.","action","ocean"],
      ["split-ascent","Split Ascent","Split into two characters and ascend parallel paths simultaneously.","action","default"],
      ["split-ember","Split Ember","Split ember streams to extinguish fires before they spread out of control.","action","fire"],
      ["split-snacker","Split Snacker","Split your snacker to collect food from two lanes at the same time.","arcade","default"],
      ["steampile-spin","Steampile Spin","Stack quirky steampunk contraptions as the entire screen rotates unpredictably.","arcade","default"],
      ["steam-pulse","Steam Pulse","Pulse steam through pipes in sync with the boiler rhythm to power the engine.","puzzle","default"],
      ["steam-spin","Steam Spin","Spin steam turbines at the right speed to generate power without overheating.","puzzle","default"],
      ["sugar-rush","Sugar Rush","Rush through a candy world collecting sweet treats before the sugar crash hits.","action","candy"],
      ["sugar-slide","Sugar Slide","Slide across sugary surfaces that melt as you move. Reach the exit fast.","action","candy"],
      ["sunset-collector","Sunset Collector","Collect the colors of the sunset before night falls and the colors fade.","arcade","default"],
      ["sunset-drift","Sunset Drift","Drift through a sunset sky, riding thermal currents and collecting light.","action","default"],
      ["sunset-hopper","Sunset Hopper","Hop across sunset cloud platforms as they dissolve in the evening light.","arcade","default"],
      ["sunset-leap","Sunset Leap","Leap between silhouetted platforms against a stunning sunset backdrop.","action","default"],
      ["sunset-scoop","Sunset Scoop","Scoop up sunset colors in a bucket game that gets harder as the sky darkens.","arcade","default"],
      ["sweet-pulse","Sweet Pulse","Pulse sweet energy through candy circuits in this confectionery adventure.","rhythm","candy"],
      ["sweet-serve","Sweet Serve","Serve sweet treats to customers in a fast-paced restaurant rush game.","arcade","candy"],
      ["sweet-swap","Sweet Swap","Swap sweets to match three in a row in this candy-matching puzzle game.","puzzle","candy"],
      ["sweet-sway","Sweet Sway","Sway between sweet hanging platforms, timing your swings to collect candy.","action","candy"],
      ["swing-drift","Swing Drift","Drift on a swing through obstacle courses, using momentum to dodge hazards.","action","default"],
      ["swing-nebula","Swing Nebula","Swing through a nebula on cosmic vines, collecting star matter.","action","space"],
      ["swing-rush","Swing Rush","Rush across platforms by swinging on ropes at high speed.","action","default"],
      ["swing-shift","Swing Shift","Shift your swing angle in mid-air to change direction and avoid obstacles.","action","default"],
      ["synth-catch","Synth Catch","Catch synthesized music notes as they rain down in this rhythmic arcade game.","arcade","rhythm"],
      ["synth-glide","Synth Glide","Glide through a synthwave world on electronic currents of light.","action","neon"],
      ["synth-shots","Synth Shots","Shoot synthesizer pulses at incoming enemies in this musical shooter.","action","rhythm"],
      ["tide-loop","Tide Loop","Loop through ocean tide patterns, riding waves without being pulled under.","action","ocean"],
      ["tide-tap","Tide Tap","Tap the tide â€” match wave patterns to surf safely to shore.","rhythm","ocean"],
      ["tide-titan","Tide Titan","Battle as the tide titan, growing stronger with each wave you conquer.","action","ocean"],
      ["tide-twins","Tide Twins","Control twin surfers riding the tide simultaneously on mirrored wave paths.","action","ocean"],
      ["tide-twist","Tide Twist","Bounce to reverse gravity and connect ocean creatures of matching colors during tidal flows.","puzzle","ocean"],
      ["time-mirage","Time Mirage","Navigate through time mirages that duplicate reality with slight delays.","action","space"],
      ["time-tether","Time Tether","Tether to time anchors, rewinding segments to solve temporal puzzles.","puzzle","space"],
      ["trail-runner","Trail Runner","Run an endless trail, jumping obstacles and collecting power-ups.","action","forest"],
      ["trail-tally","Trail Tally","Tally your trail score by collecting markers along a winding mountain path.","action","forest"],
      ["trap-trek","Trap Trek","Trek through a field of traps, timing your steps carefully to survive.","action","default"],
      ["tribal-loop","Tribal Loop","Loop through tribal patterns, following the rhythm of ancient drums.","rhythm","rhythm"],
      ["turbo-cog","Turbo Cog","Tap to toggle direction along a narrow, spinning cog path before your time expires.","action","default"],
      ["turbo-tether","Turbo Tether","Tether to turbo boost pads and slingshot through obstacle courses.","action","default"],
      ["twig-break","Twig Break","Break twigs to create platforms before your character falls into the abyss.","puzzle","forest"],
      ["twig-magnet","Twig Magnet","Use magnetic twigs to attract and repel obstacles in this nature-themed puzzler.","puzzle","forest"],
      ["twilight-tap","Twilight Tap","Tap with the twilight rhythm, matching firefly patterns as night falls.","rhythm","default"],
      ["twin-glow","Twin Glow","Control twin glowing orbs, guiding both to their targets simultaneously.","puzzle","neon"],
      ["twin-leap","Twin Leap","Leap as twin characters in sync, solving platforming puzzles with coordination.","action","default"],
      ["twin-trails","Twin Trails","Navigate twin trails simultaneously, collecting items on both paths at once.","action","default"],
      ["twix-twist","Twix Twist","Twist through double-layered corridors in this sweet arcade adventure.","action","candy"],
      ["valve-flux","Valve Flux","Adjust valves to control flux pressure in this engineering puzzle game.","puzzle","default"],
      ["vine-blur","Vine Blur","Swing rapidly between vines, avoiding multiplying logs and spikes.","action","forest"],
      ["vine-switch","Vine Switch","Swipe to flip gravity while swinging on jungle vines that change colors instantly.","action","forest"],
      ["vine-vault","Vine Vault","Vault over obstacles using vines as springboards in the jungle.","action","forest"],
      ["wave-chain","Wave Chain","Tap to chain oceanic dots while the screen rotates in sync with rolling waves.","puzzle","ocean"],
      ["wave-connect","Wave Connect","Swipe to link dots as gravity randomly changes directions in a vaporwave cityscape.","puzzle","ocean"],
      ["wave-flicker","Wave Flicker","Flicker between wave frequencies to stay in phase with the oscillating world.","action","ocean"],
      ["zoom-drift","Zoom Drift","Drift at zoom speed through a neon tunnel, avoiding walls as speed increases.","action","neon"],
      ["zoom-orb","Zoom Orb","Zoom an orb through a gauntlet, collecting rings before the timer expires.","arcade","neon"],
      ["zoom-pong","Zoom Pong","Pong at zoom speed â€” the ball gets faster with every successful hit.","arcade","neon"],
    ];

    // Emoji map by theme
    const THEME_EMOJI = {
      fire:    ['ðŸŒ‹','ðŸ”¥','ðŸ’¥','âš¡','ðŸŒ¡ï¸'],
      ocean:   ['ðŸŒŠ','ðŸš','ðŸ’§','ðŸ ','ðŸŒ€'],
      space:   ['ðŸš€','â­','ðŸŒŒ','ðŸª','ðŸ’«'],
      neon:    ['ðŸ’¡','âš¡','ðŸ”†','ðŸŽ¯','ðŸ’ '],
      forest:  ['ðŸŒ¿','ðŸƒ','ðŸŒ²','ðŸ¦‹','ðŸŒ±'],
      ice:     ['â„ï¸','ðŸ§Š','â›„','ðŸŒ¨ï¸','ðŸ’Ž'],
      candy:   ['ðŸ­','ðŸ¬','ðŸ§','ðŸ«','ðŸ¡'],
      desert:  ['ðŸœï¸','â˜€ï¸','ðŸŒµ','ðŸª','ðŸ’›'],
      rhythm:  ['ðŸŽµ','ðŸŽ¶','ðŸ¥','ðŸŽ¸','ðŸŽ¹'],
      pixel:   ['ðŸ‘¾','ðŸ•¹ï¸','ðŸŽ®','ðŸ”²','ðŸ“º'],
      default: ['ðŸŽ®','âš¡','ðŸ’œ','ðŸŒŸ','ðŸŽ¯'],
    };

    function getEmoji(slug, theme) {
      const arr = THEME_EMOJI[theme] || THEME_EMOJI.default;
      let hash = 0;
      for (const ch of slug) hash = (hash * 31 + ch.charCodeAt(0)) & 0xffffffff;
      return arr[Math.abs(hash) % arr.length];
    }

    const CAT_LABEL = { action: 'Action', arcade: 'Arcade', puzzle: 'Puzzle', rhythm: 'Rhythm' };

    function buildCard(g, idx) {
      const [slug, name, desc, cat, theme] = g;
      const emoji = getEmoji(slug, theme);
      const catLabel = CAT_LABEL[cat] || cat;
      const thumb = makeThumb(slug, theme);
      return `<div class="game-card theme-${theme}" role="button" tabindex="0" onclick="openModal(${idx})" onkeydown="if(event.key==='Enter')openModal(${idx})" data-cat="${cat}" data-name="${name.toLowerCase()}" data-desc="${desc.toLowerCase()}">
        <div class="game-card-thumb" style="background:none;overflow:hidden;">
          ${thumb}
          <span style="position:absolute;bottom:8px;right:10px;font-size:1.5rem;z-index:2;filter:drop-shadow(0 0 6px rgba(0,0,0,0.8));" aria-hidden="true">${emoji}</span>
        </div>
        <div class="game-card-body">
          <div class="game-card-name">${name}</div>
          <div class="game-card-desc">${desc}</div>
          <div class="game-card-foot">
            <span class="cat-badge">${catLabel}</span>
            <span class="play-arrow">Details + Play <svg width="12" height="12" fill="none" stroke="currentColor" stroke-width="2.5" viewBox="0 0 24 24"><path d="M5 12h14M12 5l7 7-7 7"/></svg></span>
          </div>
        </div>
      </div>`;
    }

    const grid = document.getElementById('games-grid');
    const empty = document.getElementById('empty-state');
    const countEl = document.getElementById('count');
    const searchEl = document.getElementById('search');
    const filterBtns = document.querySelectorAll('.filter-btn');

    let activeCat = 'all';
    let searchTerm = '';

    function render() {
      const q = searchTerm.trim().toLowerCase();
      const filtered = GAMES.filter(g => {
        const [slug, name, desc, cat] = g;
        if (activeCat !== 'all' && cat !== activeCat) return false;
        if (q && !name.toLowerCase().includes(q) && !desc.toLowerCase().includes(q) && !slug.includes(q)) return false;
        return true;
      });

      countEl.textContent = filtered.length;

      if (filtered.length === 0) {
        grid.style.display = 'none';
        empty.style.display = 'block';
        return;
      }
      grid.style.display = 'grid';
      empty.style.display = 'none';
      // Pass real index into GAMES for modal lookup
      const indexMap = new Map(GAMES.map((g,i) => [g[0], i]));
      grid.innerHTML = filtered.map(g => buildCard(g, indexMap.get(g[0]))).join('');

      // Scroll reveal
      const cards = grid.querySelectorAll('.game-card');
      const obs = new IntersectionObserver((entries) => {
        entries.forEach((e, i) => {
          if (e.isIntersecting) {
            setTimeout(() => e.target.classList.add('visible'), i * 18);
            obs.unobserve(e.target);
          }
        });
      }, { rootMargin: '0px 0px -30px 0px', threshold: 0.05 });
      cards.forEach(c => obs.observe(c));
    }

    // Search (debounced)
    let searchTimer;
    searchEl.addEventListener('input', () => {
      clearTimeout(searchTimer);
      searchTimer = setTimeout(() => {
        searchTerm = searchEl.value;
        render();
      }, 180);
    });

    // Filter buttons
    filterBtns.forEach(btn => {
      btn.addEventListener('click', () => {
        filterBtns.forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        activeCat = btn.dataset.cat;
        render();
      });
    });

    // Initial render
    render();

    // â”€â”€ PROCEDURAL SVG THUMB GENERATOR â”€â”€
    function makeThumb(slug, theme) {
      // Seeded PRNG from slug â€” same slug always produces same art
      let s = 0;
      for (let i = 0; i < slug.length; i++) s = (Math.imul(s, 31) + slug.charCodeAt(i)) | 0;
      s = Math.abs(s) || 99991;
      const next = () => { s ^= s << 13; s ^= s >> 17; s ^= s << 5; return (s >>> 0) / 0x100000000; };
      const ri  = (a, b) => Math.floor(next() * (b - a + 1)) + a;
      const rf  = (a, b) => (next() * (b - a) + a).toFixed(2);
      const uid = slug.replace(/-/g, '');
      const W = 280, H = 130;

      const gen = {
        fire() {
          let o = `<defs>
            <linearGradient id="bg-${uid}" x1="0" y1="0" x2="0" y2="1">
              <stop offset="0%" stop-color="hsl(${ri(8,22)},85%,12%)"/>
              <stop offset="100%" stop-color="hsl(0,70%,4%)"/>
            </linearGradient>
            <filter id="bl-${uid}"><feGaussianBlur stdDeviation="4"/></filter>
          </defs>
          <rect width="${W}" height="${H}" fill="url(#bg-${uid})"/>`;
          // Flame glow base
          o += `<ellipse cx="${ri(80,200)}" cy="${H}" rx="${ri(60,100)}" ry="${ri(20,40)}" fill="hsl(${ri(10,30)},100%,40%)" opacity="0.25" filter="url(#bl-${uid})"/>`;
          // Flames
          for (let i = 0; i < ri(3,5); i++) {
            const x = ri(30, W-30), bh = ri(45, 95), bw = ri(14,30);
            const h = ri(0, 360);
            const cp1x = (x+ri(-bw,bw)).toFixed(0), cp1y = (H-bh*0.4).toFixed(0);
            const cp2x = (x+ri(-bw/2,bw/2)).toFixed(0), cp2y = (H-bh*0.75).toFixed(0);
            const tx = (x+ri(-8,8)).toFixed(0), ty = (H-bh).toFixed(0);
            o += `<path d="M${x-bw/2} ${H} Q${cp1x} ${cp1y} ${cp2x} ${cp2y} Q${cp2x} ${cp2y} ${tx} ${ty} Q${cp2x} ${cp2y} ${x+bw/2} ${H}Z" fill="hsl(${ri(0,38)},95%,${ri(42,62)}%)" opacity="${rf(0.45,0.85)}"/>`;
          }
          // Embers
          for (let i = 0; i < ri(5,10); i++)
            o += `<circle cx="${ri(0,W)}" cy="${ri(10,H-10)}" r="${ri(1,3)}" fill="hsl(${ri(25,55)},100%,75%)" opacity="${rf(0.4,1)}"/>`;
          return o;
        },

        ocean() {
          let o = `<defs>
            <linearGradient id="bg-${uid}" x1="0" y1="0" x2="0" y2="1">
              <stop offset="0%" stop-color="hsl(${ri(195,215)},65%,14%)"/>
              <stop offset="100%" stop-color="hsl(210,80%,6%)"/>
            </linearGradient>
          </defs>
          <rect width="${W}" height="${H}" fill="url(#bg-${uid})"/>`;
          // Waves (3 layers)
          [0.65,0.75,0.88].forEach((yf, wi) => {
            const y = H*yf, amp = ri(8,22);
            const hue = ri(180,215), l = ri(28,46);
            o += `<path d="M0 ${y} Q${ri(40,80)} ${y-amp} ${ri(100,140)} ${y} Q${ri(170,200)} ${y+amp} ${ri(220,260)} ${y} Q${ri(250,275)} ${y-amp/2} ${W} ${y} L${W} ${H} L0 ${H}Z" fill="hsl(${hue},${ri(50,75)}%,${l}%)" opacity="${rf(0.25,0.55)}"/>`;
          });
          // Bubbles
          for (let i = 0; i < ri(6,12); i++) {
            const r = ri(2,7);
            o += `<circle cx="${ri(r,W-r)}" cy="${ri(r,H-15)}" r="${r}" fill="none" stroke="hsl(195,65%,72%)" stroke-width="1" opacity="${rf(0.25,0.65)}"/>`;
          }
          return o;
        },

        space() {
          let o = `<defs>
            <linearGradient id="bg-${uid}" x1="0" y1="0" x2="1" y2="1">
              <stop offset="0%" stop-color="hsl(${ri(240,265)},55%,7%)"/>
              <stop offset="100%" stop-color="hsl(260,80%,3%)"/>
            </linearGradient>
            <filter id="gl-${uid}"><feGaussianBlur stdDeviation="5"/></filter>
          </defs>
          <rect width="${W}" height="${H}" fill="url(#bg-${uid})"/>`;
          // Stars
          for (let i = 0; i < ri(22,38); i++) {
            const big = next() < 0.15;
            o += `<circle cx="${ri(0,W)}" cy="${ri(0,H)}" r="${big ? ri(2,3) : 1}" fill="white" opacity="${rf(0.25,1)}"/>`;
          }
          // Nebula glow
          o += `<circle cx="${ri(20,W/2)}" cy="${ri(10,H-10)}" r="${ri(35,70)}" fill="hsl(${ri(255,310)},70%,35%)" opacity="0.07" filter="url(#gl-${uid})"/>`;
          // Planet
          const ph = ri(190,340), px = ri(W*0.55,W*0.88), py = ri(15,55), pr = ri(18,38);
          o += `<circle cx="${px}" cy="${py}" r="${pr*1.3}" fill="hsl(${ph},55%,22%)" opacity="0.5" filter="url(#gl-${uid})"/>`;
          o += `<circle cx="${px}" cy="${py}" r="${pr}" fill="hsl(${ph},55%,28%)"/>`;
          // Ring
          o += `<ellipse cx="${px}" cy="${py}" rx="${(pr*1.65).toFixed(1)}" ry="${(pr*0.28).toFixed(1)}" fill="none" stroke="hsl(${ph},50%,55%)" stroke-width="1.5" opacity="0.45"/>`;
          return o;
        },

        neon() {
          const ah = ri(100,210);
          let o = `<rect width="${W}" height="${H}" fill="hsl(230,40%,3%)"/>`;
          // Grid
          for (let x = 0; x < W; x += ri(28,46)) o += `<line x1="${x}" y1="0" x2="${x}" y2="${H}" stroke="hsl(${ah},90%,55%)" stroke-width="0.3" opacity="0.12"/>`;
          for (let y = 0; y < H; y += ri(18,30)) o += `<line x1="0" y1="${y}" x2="${W}" y2="${y}" stroke="hsl(${ah},90%,55%)" stroke-width="0.3" opacity="0.12"/>`;
          // Nodes & connections
          const nodes = Array.from({length: ri(4,7)}, () => ({x: ri(15,W-15), y: ri(12,H-12)}));
          nodes.forEach((n,i) => {
            if (i > 0) o += `<line x1="${nodes[i-1].x}" y1="${nodes[i-1].y}" x2="${n.x}" y2="${n.y}" stroke="hsl(${ah},90%,60%)" stroke-width="1" opacity="0.45"/>`;
          });
          nodes.forEach(n => {
            o += `<circle cx="${n.x}" cy="${n.y}" r="5" fill="hsl(${ah},100%,65%)" opacity="0.2"/>`;
            o += `<circle cx="${n.x}" cy="${n.y}" r="2.5" fill="hsl(${ah},100%,75%)" opacity="0.95"/>`;
          });
          // Big glow
          o += `<circle cx="${ri(50,W-50)}" cy="${ri(20,H-20)}" r="${ri(22,42)}" fill="hsl(${ah},100%,55%)" opacity="0.06"/>`;
          return o;
        },

        forest() {
          let o = `<defs>
            <linearGradient id="bg-${uid}" x1="0" y1="0" x2="0" y2="1">
              <stop offset="0%" stop-color="hsl(${ri(108,128)},40%,7%)"/>
              <stop offset="100%" stop-color="hsl(120,50%,3%)"/>
            </linearGradient>
          </defs>
          <rect width="${W}" height="${H}" fill="url(#bg-${uid})"/>`;
          // Ground curve
          o += `<path d="M0 ${H} Q${W/2} ${H-ri(8,22)} ${W} ${H}Z" fill="hsl(120,28%,9%)"/>`;
          // Trees
          for (let i = 0; i < ri(3,6); i++) {
            const tx = ri(10,W-10), ty = H-ri(18,48), tw = ri(18,46), th = ri(38,78);
            const th2 = ri(100,140);
            o += `<polygon points="${tx},${ty} ${tx-tw/2},${ty+th} ${tx+tw/2},${ty+th}" fill="hsl(${th2},${ri(25,45)}%,${ri(10,20)}%)"/>`;
          }
          // Fireflies
          for (let i = 0; i < ri(5,10); i++)
            o += `<circle cx="${ri(0,W)}" cy="${ri(0,H-18)}" r="${ri(1,3)}" fill="hsl(${ri(70,130)},80%,72%)" opacity="${rf(0.2,0.75)}"/>`;
          // Moon
          const mh = ri(40,65);
          o += `<circle cx="${ri(W*0.65,W*0.9)}" cy="${ri(5,22)}" r="${ri(7,14)}" fill="hsl(${mh},50%,82%)" opacity="0.28"/>`;
          return o;
        },

        ice() {
          let o = `<defs>
            <linearGradient id="bg-${uid}" x1="0" y1="0" x2="0" y2="1">
              <stop offset="0%" stop-color="hsl(${ri(185,205)},48%,13%)"/>
              <stop offset="100%" stop-color="hsl(200,58%,6%)"/>
            </linearGradient>
          </defs>
          <rect width="${W}" height="${H}" fill="url(#bg-${uid})"/>`;
          // Large snowflake(s)
          for (let sf = 0; sf < ri(1,2); sf++) {
            const cx = ri(30,W-30), cy = ri(15,H-18), r = ri(18,38);
            for (let a = 0; a < 6; a++) {
              const angle = a*60*Math.PI/180;
              const ex = (cx+r*Math.cos(angle)).toFixed(1), ey = (cy+r*Math.sin(angle)).toFixed(1);
              o += `<line x1="${cx}" y1="${cy}" x2="${ex}" y2="${ey}" stroke="hsl(195,60%,75%)" stroke-width="1.5" opacity="0.45"/>`;
              const mx = cx+r*0.55*Math.cos(angle), my = cy+r*0.55*Math.sin(angle);
              const ba = angle+Math.PI/2;
              o += `<line x1="${mx.toFixed(1)}" y1="${my.toFixed(1)}" x2="${(mx+r*0.18*Math.cos(ba)).toFixed(1)}" y2="${(my+r*0.18*Math.sin(ba)).toFixed(1)}" stroke="hsl(195,60%,75%)" stroke-width="1" opacity="0.35"/>`;
            }
            o += `<circle cx="${cx}" cy="${cy}" r="2.5" fill="hsl(195,80%,80%)" opacity="0.65"/>`;
          }
          // Snow dots
          for (let i = 0; i < ri(12,22); i++)
            o += `<circle cx="${ri(0,W)}" cy="${ri(0,H)}" r="${ri(1,2)}" fill="white" opacity="${rf(0.15,0.55)}"/>`;
          // Ice shards
          for (let i = 0; i < ri(2,4); i++) {
            const x = ri(5,W-5), y = ri(H*0.55,H);
            o += `<polygon points="${x},${y-ri(8,28)} ${x-ri(4,10)},${y} ${x+ri(4,10)},${y}" fill="hsl(195,58%,${ri(38,58)}%)" opacity="0.18"/>`;
          }
          return o;
        },

        candy() {
          const h1 = ri(290,350), h2 = ri(0,55);
          let o = `<defs>
            <linearGradient id="bg-${uid}" x1="0" y1="0" x2="1" y2="1">
              <stop offset="0%" stop-color="hsl(${h1},55%,9%)"/>
              <stop offset="100%" stop-color="hsl(${h2},48%,7%)"/>
            </linearGradient>
          </defs>
          <rect width="${W}" height="${H}" fill="url(#bg-${uid})"/>`;
          // Lollipop
          const lx = ri(W*0.18,W*0.4), ly = ri(25,48), lr = ri(16,26);
          o += `<line x1="${lx}" y1="${ly+lr}" x2="${lx}" y2="${H}" stroke="hsl(0,0%,55%)" stroke-width="3" opacity="0.35"/>`;
          o += `<circle cx="${lx}" cy="${ly}" r="${lr}" fill="hsl(${ri(290,360)},75%,28%)" opacity="0.85"/>`;
          o += `<circle cx="${lx}" cy="${ly}" r="${lr*0.55}" fill="hsl(${ri(0,55)},75%,38%)" opacity="0.7"/>`;
          // Candy scatter
          for (let i = 0; i < ri(7,14); i++)
            o += `<circle cx="${ri(0,W)}" cy="${ri(0,H)}" r="${ri(3,7)}" fill="hsl(${ri(0,360)},68%,${ri(38,58)}%)" opacity="${rf(0.25,0.65)}"/>`;
          // Swirl
          o += `<path d="M${ri(W*0.5,W*0.65)} ${ri(15,45)} Q${ri(W*0.6,W*0.9)} ${ri(35,75)} ${ri(W*0.72,W)} ${ri(55,H)}" fill="none" stroke="hsl(${ri(280,340)},68%,58%)" stroke-width="2" opacity="0.28"/>`;
          return o;
        },

        desert() {
          let o = `<defs>
            <linearGradient id="bg-${uid}" x1="0" y1="0" x2="0" y2="1">
              <stop offset="0%" stop-color="hsl(${ri(28,48)},55%,9%)"/>
              <stop offset="100%" stop-color="hsl(${ri(18,32)},65%,4%)"/>
            </linearGradient>
          </defs>
          <rect width="${W}" height="${H}" fill="url(#bg-${uid})"/>`;
          // Stars
          for (let i = 0; i < ri(6,12); i++)
            o += `<circle cx="${ri(0,W)}" cy="${ri(0,H/2)}" r="1" fill="white" opacity="${rf(0.18,0.55)}"/>`;
          // Sun
          const sx = ri(W*0.58,W*0.88), sy = ri(8,28), sr = ri(13,24);
          o += `<circle cx="${sx}" cy="${sy}" r="${sr*1.45}" fill="hsl(42,85%,62%)" opacity="0.08"/>`;
          o += `<circle cx="${sx}" cy="${sy}" r="${sr}" fill="hsl(42,90%,65%)" opacity="0.48"/>`;
          // Dunes
          [ri(55,75),ri(70,88),ri(85,H)].forEach((by, di) => {
            o += `<path d="M0 ${H} Q${ri(W*0.1,W*0.4)} ${by-ri(18,48)} ${ri(W*0.3,W*0.65)} ${by} Q${ri(W*0.6,W*0.85)} ${by-ri(8,28)} ${W} ${H}Z" fill="hsl(${ri(23,38)},${ri(35,55)}%,${ri(10,18)}%)" opacity="${rf(0.5,0.9)}"/>`;
          });
          return o;
        },

        rhythm() {
          const rh = ri(255,325);
          let o = `<defs>
            <linearGradient id="bg-${uid}" x1="0" y1="0" x2="0" y2="1">
              <stop offset="0%" stop-color="hsl(${rh},55%,9%)"/>
              <stop offset="100%" stop-color="hsl(${rh},75%,3%)"/>
            </linearGradient>
          </defs>
          <rect width="${W}" height="${H}" fill="url(#bg-${uid})"/>`;
          // Equalizer bars
          const nb = ri(8,13), bw = Math.floor(W/nb)-3;
          for (let i = 0; i < nb; i++) {
            const bh = ri(12, H*0.82), bx = i*(W/nb)+1, by = H-bh;
            const bhu = rh+ri(-28,28);
            o += `<rect x="${bx}" y="${by}" width="${bw}" height="${bh}" rx="2" fill="hsl(${bhu},78%,${ri(32,52)}%)" opacity="${rf(0.5,0.9)}"/>`;
            o += `<rect x="${bx}" y="${by}" width="${bw}" height="2.5" rx="1" fill="hsl(${bhu},100%,78%)" opacity="0.85"/>`;
          }
          // Wave overlay
          o += `<path d="M0 ${ri(28,55)} Q${W*0.25} ${ri(8,48)} ${W*0.5} ${ri(28,55)} Q${W*0.75} ${ri(8,48)} ${W} ${ri(28,55)}" fill="none" stroke="hsl(${rh},88%,68%)" stroke-width="1.5" opacity="0.28"/>`;
          return o;
        },

        pixel() {
          const ph = ri(155,215);
          let o = `<defs>
            <linearGradient id="bg-${uid}" x1="0" y1="0" x2="0" y2="1">
              <stop offset="0%" stop-color="hsl(${ph},48%,7%)"/>
              <stop offset="100%" stop-color="hsl(${ph},58%,3%)"/>
            </linearGradient>
          </defs>
          <rect width="${W}" height="${H}" fill="url(#bg-${uid})"/>`;
          // Scanlines
          for (let y = 0; y < H; y += 4) o += `<line x1="0" y1="${y}" x2="${W}" y2="${y}" stroke="black" stroke-width="0.5" opacity="0.08"/>`;
          // Pixel art character (8Ã—5 symmetric)
          const cols=8, rows=5, pw=22, phh=20;
          const sx=(W-cols*pw)/2, sy=(H-rows*phh)/2;
          const pat = Array.from({length:rows}, ()=>Array.from({length:cols}, ()=>next()>0.42));
          for (let r=0;r<rows;r++) for (let c=0;c<Math.floor(cols/2);c++) pat[r][cols-1-c]=pat[r][c];
          for (let r=0;r<rows;r++) for (let c=0;c<cols;c++) {
            if (pat[r][c]) {
              const phu = ph+ri(-38,38);
              o += `<rect x="${sx+c*pw}" y="${sy+r*phh}" width="${pw-2}" height="${phh-2}" fill="hsl(${phu},78%,${ri(38,58)}%)"/>`;
            }
          }
          return o;
        },

        default() {
          const dh = ri(238,302);
          let o = `<defs>
            <linearGradient id="bg-${uid}" x1="0" y1="1" x2="1" y2="0">
              <stop offset="0%" stop-color="hsl(${dh},48%,7%)"/>
              <stop offset="100%" stop-color="hsl(${dh+38},55%,4%)"/>
            </linearGradient>
          </defs>
          <rect width="${W}" height="${H}" fill="url(#bg-${uid})"/>`;
          // Geometric shapes
          for (let i = 0; i < ri(3,6); i++) {
            const sides=[3,4,6][ri(0,2)], cx=ri(18,W-18), cy=ri(13,H-13), r=ri(13,38);
            const shu = dh+ri(-55,55);
            let pts='';
            for (let s=0;s<sides;s++) { const a=(s/sides)*Math.PI*2-Math.PI/2; pts+=`${(cx+r*Math.cos(a)).toFixed(1)},${(cy+r*Math.sin(a)).toFixed(1)} `; }
            o += `<polygon points="${pts}" fill="none" stroke="hsl(${shu},68%,${ri(38,58)}%)" stroke-width="${ri(1,2)}" opacity="${rf(0.18,0.48)}"/>`;
          }
          // Glow blobs
          for (let i = 0; i < ri(2,3); i++)
            o += `<circle cx="${ri(0,W)}" cy="${ri(0,H)}" r="${ri(20,48)}" fill="hsl(${dh+ri(-28,55)},80%,50%)" opacity="0.05"/>`;
          // Dots
          for (let i = 0; i < ri(5,10); i++)
            o += `<circle cx="${ri(0,W)}" cy="${ri(0,H)}" r="${ri(1,3)}" fill="hsl(${dh},80%,70%)" opacity="${rf(0.28,0.68)}"/>`;
          return o;
        }
      };

      const inner = (gen[theme] || gen.default)();
      return `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 ${W} ${H}" preserveAspectRatio="xMidYMid slice" style="width:100%;height:100%;display:block">${inner}</svg>`;
    }

    // â”€â”€ MODAL CONTENT ENGINE â”€â”€
    const STEPS = {
      action: [
        "Launch the game and get familiar with the environment â€” notice the obstacles, terrain, and your character's movement range.",
        "Start moving and react to incoming hazards as quickly as possible. Your reflexes are your main tool.",
        "Collect any power-ups or bonuses that appear â€” they give you temporary advantages like speed boosts or shields.",
        "As you survive longer, the pace increases and obstacle patterns become more complex. Stay focused.",
        "Aim to beat your personal best score each run. Share your score and challenge friends to do better."
      ],
      arcade: [
        "Start the game and observe the play area â€” understand where items spawn and how the scoring system works.",
        "Execute each action with precision. In arcade games, consistency beats speed every time.",
        "Chain successful moves together to build combos and earn bonus multipliers.",
        "Watch for special items or events that offer big point rewards â€” prioritize these when safe.",
        "The difficulty ramps up progressively. Adapt your strategy and push for a new high score every session."
      ],
      puzzle: [
        "Take a moment to survey the board before making your first move â€” the optimal solution is rarely the first one you see.",
        "Identify the main mechanic â€” whether it's matching, linking, aligning, or stacking â€” and plan around it.",
        "Think two to three moves ahead. Every action should set up your next move, not just solve the immediate problem.",
        "Look for chain reactions: a single well-placed move can trigger cascades that clear large portions of the board.",
        "If you get stuck, step back and look at the big picture. The answer is usually simpler than it seems."
      ],
      rhythm: [
        "Before playing, listen to the background music or beat indicators for a few seconds to internalize the tempo.",
        "Tap, click, or press in time with the beat â€” focus on the rhythm, not just the visuals.",
        "Build a streak of perfect timing hits to activate combo multipliers and rocket your score.",
        "As the tempo increases, stay relaxed. Tension causes mistimed inputs â€” breathe and trust your rhythm.",
        "Practice the difficult sections repeatedly. Rhythm games reward muscle memory above all else."
      ]
    };

    const CONTROLS = {
      action: [
        {key:'Tap / Click', desc:'Jump or dodge'},
        {key:'Spacebar', desc:'Primary action'},
        {key:'â† â†’', desc:'Move left / right'},
        {key:'â†‘ â†“', desc:'Move up / down'}
      ],
      arcade: [
        {key:'Tap / Click', desc:'Shoot or interact'},
        {key:'Mouse / Touch', desc:'Aim and target'},
        {key:'Spacebar', desc:'Fire or confirm'},
        {key:'â† â†’', desc:'Move paddle / character'}
      ],
      puzzle: [
        {key:'Click / Tap', desc:'Select a piece'},
        {key:'Drag', desc:'Move or swap pieces'},
        {key:'Spacebar', desc:'Confirm selection'},
        {key:'Esc', desc:'Deselect / cancel'}
      ],
      rhythm: [
        {key:'Tap / Click', desc:'Hit the beat'},
        {key:'Spacebar', desc:'Primary beat tap'},
        {key:'â† â†’ â†‘ â†“', desc:'Directional beats'},
        {key:'Hold', desc:'Sustained note / hold beat'}
      ]
    };

    const FEATURES = {
      fire:    ['Intense volcanic environments with lava flows and eruptions','Dynamic obstacle patterns that shift with heat intensity','Escalating difficulty as magma levels rise','Explosive visual effects and particle fire systems'],
      ocean:   ['Immersive underwater and wave environments','Fluid physics that affect player movement and strategy','Marine life obstacles with unique movement patterns','Depth-based challenge progression with tidal mechanics'],
      space:   ['Zero-gravity simulation with orbital drift mechanics','Cosmic backdrop with asteroid fields and nebulae','Planetary gravity wells that affect trajectory','Star collection and deep-space exploration elements'],
      neon:    ['Vibrant neon visuals with glowing particle effects','High-speed reflex-based gameplay in electric environments','Laser and beam obstacle systems that react to movement','Synthwave-inspired atmosphere with pulsing light effects'],
      forest:  ['Lush natural environments with canopy and undergrowth layers','Wind and physics-based movement through forest terrain','Wildlife and creature obstacles with behavioral patterns','Branch-to-branch traversal and vine-swing mechanics'],
      ice:     ['Slippery ice physics that affect momentum and control','Freezing hazards and cracking platform mechanics','Blizzard visibility challenges and frost effects','Glacial environment with avalanche and collapse events'],
      candy:   ['Vibrant sweet-themed worlds bursting with color','Sugar physics â€” melting surfaces and sticky mechanics','Flavor-matching and candy-combo systems','Cheerful environments filled with confectionery obstacles'],
      desert:  ['Expansive desert terrain with shifting sand dunes','Heat haze and sandstorm visibility effects','Wind mechanics that push or assist player movement','Oasis reward zones hidden across the arid landscape'],
      rhythm:  ['Beat-synchronized gameplay tied to a dynamic soundtrack','Escalating tempo with increasingly complex patterns','Combo multiplier system that rewards perfect timing streaks','Multiple rhythm tracks unlocked through progression'],
      pixel:   ['Retro 8-bit pixel art aesthetic with nostalgic charm','Classic arcade gameplay mechanics refined for modern play','Chiptune-inspired soundtrack and authentic sound effects','Pixel-perfect hitboxes for precise and fair challenge'],
      default: ['Dynamically generated obstacle patterns for endless variety','Smooth control system optimized for both mobile and desktop','Progressive difficulty scaling that grows with your skill','Global score tracking and personal best achievements']
    };

    const TIPS = {
      action: [
        {icon:'âš¡', tip:'Stay near the center of the play area so you can react to threats from any direction.'},
        {icon:'ðŸ‘ï¸', tip:'Watch the spawn patterns â€” obstacles tend to repeat. Learning the cycle gives you a huge advantage.'},
        {icon:'ðŸŽ¯', tip:'Don\'t chase power-ups that put you in danger. Surviving is always worth more than a bonus.'}
      ],
      arcade: [
        {icon:'ðŸ”—', tip:'Chain your actions deliberately â€” a calm, consistent chain always beats frantic mashing.'},
        {icon:'â±ï¸', tip:'Timing beats speed. A perfectly timed action scores more than three rushed attempts.'},
        {icon:'ðŸ’¡', tip:'Learn the scoring system. Understanding what earns the most points is the fastest route to a high score.'}
      ],
      puzzle: [
        {icon:'ðŸ§ ', tip:'Always look for chain reactions before committing to a move â€” they can solve the board in one go.'},
        {icon:'â³', tip:'Don\'t rush. The timer, if any, rarely matters as much as making the right move at the right time.'},
        {icon:'ðŸ”„', tip:'If you\'re stuck, try working backwards from the goal state to figure out which move unlocks it.'}
      ],
      rhythm: [
        {icon:'ðŸŽµ', tip:'Listen more than you look. Your ears pick up the beat faster than your eyes track the visuals.'},
        {icon:'ðŸ˜Œ', tip:'Keep your hand and wrist relaxed. Tension causes inconsistent timing â€” loosen up between beats.'},
        {icon:'ðŸ”', tip:'Replay difficult sections intentionally. Rhythm mastery comes from deliberate repetition, not luck.'}
      ]
    };

    const THEME_EXTENDED = {
      fire:    (name) => `${name} takes place in a blazing volcanic world where every second counts. The environment is hostile and ever-changing â€” rivers of lava shift course, volcanic rocks rain from above, and the ground itself can give way at any moment. Players must harness their instincts and develop a sharp sense of timing to survive the relentless heat. The deeper you venture into the volcanic zone, the more intense and rewarding the challenge becomes.`,
      ocean:   (name) => `${name} immerses you in the fluid, unpredictable world of the ocean. Wave mechanics and underwater currents constantly push against your intentions, creating a game that rewards adaptability over rigidity. Navigating through marine life, coral hazards, and tidal forces requires both quick reactions and a feel for the flow of the water. Every dive is different, and every wave brings a new challenge to overcome.`,
      space:   (name) => `${name} launches you into the vast expanse of deep space where the rules of physics bend around gravity wells, asteroid clusters, and cosmic phenomena. The silence of space belies the intense challenge ahead â€” orbital drift, interstellar debris, and the sheer scale of the cosmos conspire to test your precision. Mastering space movement is the key to climbing the leaderboard and exploring further into the unknown.`,
      neon:    (name) => `${name} exists in a high-energy neon dimension where light moves at the speed of reflex. Electric grids, laser barriers, and glowing obstacles demand razor-sharp attention and split-second decisions. The visual feedback is immediate and satisfying â€” every near-miss and perfect dodge looks and feels incredible. This is a game built for players who thrive on speed and precision in a dazzling electronic world.`,
      forest:  (name) => `${name} sends you deep into a vibrant living forest where every branch, vine, and canopy layer presents a new challenge. The forest is alive â€” wind moves the trees, creatures patrol the undergrowth, and the terrain shifts with the time of day. Moving through this natural obstacle course rewards players who can read the environment and plan their path through the canopy with fluid, flowing movement.`,
      ice:     (name) => `${name} drops you into a frozen world where the laws of friction are negotiable. Ice surfaces send you sliding unpredictably, platforms crack and collapse under sustained weight, and blizzard conditions reduce visibility at the worst moments. Surviving in this glacial environment means planning your movements with the knowledge that stopping on a dime isn't always possible â€” momentum is your enemy and your ally.`,
      candy:   (name) => `${name} unfolds in a wonderfully chaotic candy world where the environment is as sweet as it is dangerous. Melting lollipops, sticky caramel surfaces, and bouncing gum bubbles create an obstacle course that's as unpredictable as it is colorful. Beneath the sugary charm lies a genuinely challenging game that demands timing, pattern recognition, and a love for confectionery chaos.`,
      desert:  (name) => `${name} places you in a vast, sun-scorched desert landscape where survival is the ultimate prize. Shifting sand dunes destabilize your footing, sandstorms strip away visibility, and the relentless sun creates heat mirage effects that make the path ahead uncertain. Finding oases and mastering the desert wind mechanics are the skills that separate survivors from those swallowed by the sand.`,
      rhythm:  (name) => `${name} is built entirely around the beat â€” a game where your timing is your talent. The soundtrack drives every mechanic, and falling out of sync with the rhythm means falling behind in score. As the tempo escalates and patterns grow more complex, the satisfaction of maintaining a perfect streak becomes one of the most rewarding feelings in casual gaming. This game turns music into a challenge you can feel.`,
      pixel:   (name) => `${name} is a love letter to classic arcade gaming, rendered in crisp pixel art with the kind of tight, precise controls that defined the golden age of arcades. Every mechanic has been distilled to its purest form â€” no unnecessary complexity, just you, the controller, and the challenge. Chiptune audio and authentic visual style complete the retro package, delivering modern challenge through a timeless aesthetic lens.`,
      default: (name) => `${name} is a fast-paced browser game that keeps you engaged from the first second to the last. With dynamically scaling difficulty, smooth controls optimized for both desktop and mobile, and a scoring system that always gives you something to chase, it's the kind of game that's easy to start but hard to put down. Whether you're playing for two minutes or two hours, every session feels rewarding.`
    };

    function openModal(idx) {
      const g = GAMES[idx];
      const [slug, name, desc, cat, theme] = g;
      const emoji = getEmoji(slug, theme);
      const themeKey = THEME_EXTENDED[theme] ? theme : 'default';

      // Thumb
      const thumb = document.getElementById('modal-thumb');
      thumb.className = `modal-thumb theme-${theme}`;
      thumb.innerHTML = `<span style="font-size:5rem;position:relative;z-index:1;">${emoji}</span>`;

      // Title
      document.getElementById('modal-title-text').textContent = name;

      // Description â€” original + extended paragraph
      const extended = THEME_EXTENDED[themeKey](name);
      document.getElementById('modal-desc').innerHTML = `${desc}<br><br>${extended}`;

      // Steps
      const steps = STEPS[cat] || STEPS.action;
      document.getElementById('modal-steps').innerHTML = steps.map((s,i) =>
        `<li><span class="step-num">${i+1}</span><span>${s}</span></li>`
      ).join('');

      // Controls
      const ctrls = CONTROLS[cat] || CONTROLS.action;
      document.getElementById('modal-controls').innerHTML = ctrls.map(c =>
        `<div class="ctrl-chip"><span class="ctrl-key">${c.key}</span> ${c.desc}</div>`
      ).join('');

      // Features
      const feats = FEATURES[themeKey] || FEATURES.default;
      document.getElementById('modal-features').innerHTML = feats.map(f =>
        `<div class="modal-feature">${f}</div>`
      ).join('');

      // Tips
      const tips = TIPS[cat] || TIPS.action;
      document.getElementById('modal-tips').innerHTML = tips.map(t =>
        `<div class="modal-tip"><span class="tip-icon">${t.icon}</span><span>${t.tip}</span></div>`
      ).join('');

      // Play button
      document.getElementById('modal-play-btn').href = `/games/${slug}/`;

      // Open
      const overlay = document.getElementById('modal-overlay');
      overlay.classList.add('open');
      document.body.style.overflow = 'hidden';
    }

    function closeModal() {
      document.getElementById('modal-overlay').classList.remove('open');
      document.body.style.overflow = '';
    }

    // Close on overlay click
    document.getElementById('modal-overlay').addEventListener('click', function(e) {
      if (e.target === this) closeModal();
    });

    // Close on Escape
    document.addEventListener('keydown', e => { if (e.key === 'Escape') closeModal(); });
  </script>
</body>
</html>
